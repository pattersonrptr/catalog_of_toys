/*!
 * jQuery bsValidate Plugin v0.7.2
 * Form Validation for Twitter Bootstrap Forms (https://github.com/matthewjmink/bsValidate)
 * Copyright 2016 Matt Mink
 * Licensed under MIT (https://github.com/matthewjmink/bsValidate/blob/master/LICENSE)
 */
!function(a,b,c,d){"use strict";function e(b,c){s.alertTarget=a(b),this.element=b,this.settings=a.extend({},s,c),this._defaults=s,this._name=r,this.init()}function f(a,b){var c=!0;return a[b].required.dependency&&(a[b].required.dependency.isBlank&&(c=c&&g(a,a[b].required.dependency.isBlank)),a[b].required.dependency.isNotBlank&&(c=c&&h(a,a[b].required.dependency.isNotBlank))),c}function g(a,b){var c=0;"string"==typeof b&&(b=b.split(","));for(var d=0;d<b.length;d++)a[b[d]].el.isBlank()&&c++;return c===b.length}function h(a,b){var c=0;"string"==typeof b&&(b=b.split(","));for(var d=0;d<b.length;d++)a[b[d]].el.isBlank()||c++;return c===b.length}function i(a,b,c,e){return a?(b!==d&&k(c,b,e),1):(b!==d&&l(c,e),0)}function j(a,b,c,e){return a?(b!==d&&m(c,b,e),1):(b!==d&&n(c,e),0)}function k(b,c,d){if(b.find("."+d).length<1){var e=a('<span class="help-block '+d+'">'+c+"</span>");b.append(e)}}function l(a,b){var c=a.find("."+b);c.remove()}function m(b,c,d){if(b.find("."+d).length<1){var e=a('<div class="alert alert-danger '+d+'">'+c+"</div>");console.log(e),b.prepend(e)}}function n(a,b){var c=a.find("."+b);c.remove()}function o(b){var c,e=b.data,g=e.bsv,h=a(g.element),j=a(b.target),k=e.fields,l=e.key,m=j.parents(".form-group"),n=0,o=j.val();if(k[l].hasDependency!==d){var r=k[l].hasDependency.split(",");if(r.length>1||k[r[0]].el[0]!==b.relatedTarget)for(var s=0;s<r.length;s++){var t=k[r[s]].el.isBlank(g),u=k[r[s]].el.parents(".form-group");c="help-required",t=t&&f(k,r[s]);var v=i(t,k[r[s]].required.helpText,u,c);v?u.addClass("has-error"):u.removeClass("has-error")}}if(k[l].required!==d){var w=k[l].el.isBlank(g);c="help-required",w=w&&f(k,l),n+=i(w,k[l].required.helpText,m,c)}if(k[l].email!==d&&(c="help-email",n+=i(!q(o)&&""!==o,k[l].email.helpText,m,c)),k[l].characters!==d&&(c="help-characters",n+=i(o.length>k[l].characters.limit,k[l].characters.helpText,m,c)),k[l].regex!==d&&(c="help-regex",n+=i(!p(k[l].regex.pattern,o)&&!j.isBlank(g),k[l].regex.helpText,m,c)),k[l].match!==d){c="help-match";var x=h.find('[name="'+k[l].match.field+'"]').val();n+=i(x!==o&&!j.isBlank(g),k[l].match.helpText,m,c)}n>0?m.addClass("has-error"):m.removeClass("has-error")}function p(a,b){return b.match(a)}function q(a){var b=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return b.test(a)}var r="bsValidate",s={requiredSelector:"input.required,textarea.required,select.required,[required]",fields:{},mergeAlerts:!1,alertMessage:null,blankSelectValue:"",novalidate:!0,before:function(){},success:function(){},fail:function(a){a.preventDefault()}};a.extend(e.prototype,{init:function(){var b=this,c=a(b.element),e=c.find(b.settings.requiredSelector),g=b.settings.fields,h=c.attr("novalidate");h===d&&b.settings.novalidate&&c.attr("novalidate",""),e.each(function(){var b=a(this).attr("name");if(g[b]===d||g[b].required===d){var c=a(this).parents(".form-group"),e=c.find(".label,label").text();g[b]=g[b]===d?{}:g[b],g[b].el=a(this),g[b].required={alert:e+" is required."}}}),a.each(g,function(e,f){("object"!=typeof g[e].el||g[e].el.jquery===d)&&(g[e].el=c.find('[name="'+e+'"]')),g[e].required&&g[e].required.dependency&&a.each(g[e].required.dependency,function(a,d){for(var f=d.split(","),h=0;h<f.length;h++)g[f[h]]||(g[f[h]]={el:c.find('[name="'+f[h]+'"]')},g[f[h]].el.on("blur",{bsv:b,fields:g,key:f[h],value:g[f[h]]},o)),g[f[h]].hasDependency?g[f[h]].hasDependency+=","+e:g[f[h]].hasDependency=e}),g[e].el.length>0?g[e].el.on("blur",{bsv:b,fields:g,key:e,value:f},o):delete g[e]}),c.submit(function(e){b.settings.before();var h=!0,i=b.settings.mergeAlerts?b.settings.alertMessage:"",k=!1;null===i&&(i="<ul>",k=!0),a.each(g,function(a,e){var l,m=g[a].el.parents(".form-group"),n=0,o=g[a].el.val(),r=a.replace(/[^a-zA-Z\d-]/g,"-");if(g[a].required!==d){var s=g[a].el.isBlank(b);l="alert-"+r+"-required",s=s&&f(g,a),n+=b.settings.mergeAlerts?0|s:j(s,g[a].required.alert,b.settings.alertTarget,l),i+=k?"<li>"+g[a].required.alert+"</li>":""}if(g[a].email!==d&&(l="alert-"+r+"-email",n+=b.settings.mergeAlerts?!q(o)&&0|!g[a].el.isBlank(b):j(!q(o)&&!g[a].el.isBlank(b),g[a].email.alert,b.settings.alertTarget,l),i+=k?"<li>"+g[a].email.alert+"</li>":""),g[a].characters!==d&&(l="alert-"+r+"-characters",n+=b.settings.mergeAlerts?o.length>g[a].characters.limit|0:j(o.length>g[a].characters.limit,g[a].characters.alert,b.settings.alertTarget,l),i+=k?"<li>"+g[a].characters.alert+"</li>":""),g[a].regex!==d&&(l="alert-"+r+"-regex",n+=b.settings.mergeAlerts?!p(g[a].regex.pattern,o)&&0|!g[a].el.isBlank(b):j(!p(g[a].regex.pattern,o)&&!g[a].el.isBlank(b),g[a].regex.alert,b.settings.alertTarget,l),i+=k?"<li>"+g[a].regex.alert+"</li>":""),g[a].match!==d){l="alert-"+r+"-match";var t=c.find('[name="'+g[a].match.field+'"]').val();n+=b.settings.mergeAlerts?t!==o&&0|!g[a].el.isBlank(b):j(t!==o&&!g[a].el.isBlank(b),g[a].match.alert,b.settings.alertTarget,l),i+=k?"<li>"+g[a].regex.alert+"</li>":""}n>0?(m.addClass("has-error"),h=!1):m.removeClass("has-error")}),j(!h&&b.settings.mergeAlerts,i,b.settings.alertTarget,"bsv-alert"),h?b.settings.success(e):b.settings.fail(e)})},destroy:function(b){var c=this,e=c.settings.fields;c.settings.fields={},a.each(e,function(a,b){"object"==typeof b.el&&b.el.jquery!==d&&b.el.off("change blur",o)}),a(c.element).off("submit").removeData(),b&&b()}}),a.fn[r]=function(b){return this.each(function(){var c=a.data(this,"plugin_"+r);c?"destroy"===b&&c.destroy():a.data(this,"plugin_"+r,new e(this,b))})},a.fn.isBlank=function(a){var b=this.val();return this.is(":checkbox")?!this.is(":checked"):""===b||null===b||b.length<1||"select"===this[0].nodeName.toLowerCase()&&b==a.settings.blankSelectValue},a.fn.destroy=function(){return this.each(function(){var b=a.data(this,"plugin_"+r);b&&b.destroy()})}}(jQuery,window,document);